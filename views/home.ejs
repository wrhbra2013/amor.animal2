 <%-include("_header")-%>
 
 <main class="main-content">
 
     <!-- ==========================================================================
         1. Hero Section (Destaque Principal)
         ========================================================================== -->
     <section class="hero-section text-center py-5" style="background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('/static/css/imagem/ong_hero_background.jpg') no-repeat center center; background-size: cover;">
         <div class="container" style="background-color: transparent; box-shadow: none; border: none;">
             <h1 style="color: white; font-size: 2.8em; text-shadow: 2px 2px 4px rgba(0,0,0,0.7);">Amor que Transforma Vidas</h1>
             <p style="color: #f0f0f0; font-size: 1.3em; margin-bottom: 1.5rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.7);">
                 Junte-se a nós na missão de resgatar, cuidar e encontrar lares amorosos para animais abandonados..
             </p>
             <a href="/doacao" class="button me-2" style="background-color: var(--hc-button-text); color: var(--hc-bg-color); padding: 12px 25px; font-size: 1.1em;">Quero Doar</a>
             <a href="/adocao" class="button" style="background-color: transparent; border: 2px solid var(--hc-button-text); color: var(--hc-button-text); padding: 10px 23px; font-size: 1.1em;">Adote um Amigo</a>
         </div>
     </section>
 
     <!-- ==========================================================================
         2. Sobre Nós (Resumido)
         ========================================================================== -->
     <section id="sobre-resumo" class="py-5">
         <div class="container">
             <div class="row align-items-center"> <!-- Supondo que você tenha classes .row e .col-md-X do Bootstrap ou similar -->
                 <div class="col-md-7">
                     <h2>Nossa Missão</h2>
                     <p>A ONG Amor Animal é dedicada ao resgate, reabilitação e realocação de animais em situação de vulnerabilidade. Movidos pela compaixão, trabalhamos incansavelmente para oferecer uma segunda chance a cada um deles, promovendo a posse responsável e o bem-estar animal em nossa comunidade.</p>
                     <a href="/sobre" class="button">Saiba Mais Sobre Nós</a>
                 </div>
                 <div class="col-md-5 text-center">
                    <span>Equipe ONG Amor Animal</span>
                 </div>
             </div>
         </div>
     </section>
 
     <!-- ==========================================================================
         3. Notícias (Carrossel)
         ========================================================================== -->
     <section id="noticias" class="section-noticias py-5" style="background-color: var(--bg-color);"> <!-- Usando --bg-color para alternar -->
         <div class="container">
             <div class="d-flex justify-content-between align-items-center mb-4">
                 <h2>Fique por Dentro</h2>
                 <% if (user) { %>
                 <a href="/home/form" class="button btn-sm">Nova Notícia</a>
                 <% } %>
             </div>
 
             <!-- DEBUGGING BLOCK FOR MODEL1 -->
             <pre style="background-color: #161616; color: white; padding: 10px; border: 1px solid #fff8f8; white-space: pre-wrap; word-wrap: break-word; margin-bottom: 1rem;">
                 DEBUG: Conteúdo de model1:
                 <% if (typeof model1 !== 'undefined') { %>
                     <%= JSON.stringify(model1, null, 2) %>
                     Número de itens em model1: <%= model1.length %>
                 <% } else { %>
                     model1 é undefined.
                 <% } %>
             </pre>
             <!-- END DEBUGGING BLOCK -->
             
             <%
             let allNewsItems = [];
             if (typeof model1 !== 'undefined' && model1.length > 0) {
                
               model1.forEach(homeItem => {
                 allNewsItems.push({
                   type: homeItem.type || 'dynamic',
                   id: homeItem.id,
                   titulo: homeItem.titulo,
                   conteudo: homeItem.mensagem,
                   arquivo: homeItem.arquivo,
                   link: homeItem.link,
                   isExternalLink: !!homeItem.link,
                   icon: homeItem.icon,
                   linkPath: homeItem.linkPath,
                   btnClass: homeItem.btnClass,
                   btnText: homeItem.btnText
                 });
               });
             }
             // Adicione notícias "anteriormente estáticas" aqui se elas também vierem de model1 com um 'type' específico
             %>
 
             <% if (allNewsItems.length > 0) { %>
             <div class="photobanner-container news-carousel-container mb-4" id="news-carousel">
                 <div class="photobanner-slides news-carousel-slides">
                     <% allNewsItems.forEach((news, index) => { %>
                     <div class="photobanner-slide news-carousel-slide <%= index === 0 ? 'active' : '' %>">
                         <div class="card h-100 shadow-sm noticia-item w-100">
                             <% if (news.arquivo) { %>
                             <img src="/static/uploads/home/<%= news.arquivo %>" alt="<%= news.titulo %>" class="card-img-top noticia-img-fixed-height">
                             <% } else if (news.type === 'dynamic') { %>
                             <img src="/static/images/placeholder-news.jpg" alt="Placeholder" class="card-img-top noticia-img-fixed-height">
                             <% } %>
                             <div class="card-body d-flex flex-column">
                                 <h5 class="card-title">
                                     <% if (news.icon) { %><i class="<%= news.icon %> me-2"></i><% } %>
                                     <%= news.titulo %>
                                 </h5>
                                 <p class="card-text flex-grow-1"><%= news.conteudo %></p>
                                 <% if (news.type === 'dynamic' && news.isExternalLink) { %>
                                 <a href="<%= news.link %>" target="_blank" rel="noopener noreferrer" class="button mt-auto align-self-start">Leia Mais</a>
                                 <% } else if (news.type === 'static' && news.linkPath) { %>
                                 <a href="<%= news.linkPath %>" class="button <%= news.btnClass || '' %> mt-auto align-self-start"><%= news.btnText || 'Saiba Mais' %></a>
                                 <% } %>
                             </div>
                         </div>
                     </div>
                     <% }); %>
                 </div>
                 <% if (allNewsItems.length > 1) { %>
                 <button class="photobanner-control prev news-carousel-control" aria-label="Anterior">&lt;</button>
                 <button class="photobanner-control next news-carousel-control" aria-label="Próximo">&gt;</button>
                 <div class="photobanner-dots news-carousel-dots">
                     <% allNewsItems.forEach((news, index) => { %>
                     <span class="dot <%= index === 0 ? 'active' : '' %>" data-slide="<%= index %>"></span>
                     <% }); %>
                 </div>
                 <% } %>
             </div>
             <% } else { %>
             <p class="text-center text-muted">Nenhuma notícia para exibir no momento.</p>
             <% } %>
         </div>
     </section>
 
     <!-- ==========================================================================
         4. Adoção em Destaque
         ========================================================================== -->
     <section id="adocao-destaque" class="py-5">
         <div class="container">
             <h2 class="text-center mb-4">Esperando por um Lar</h2>
             <% if (typeof model2 !== 'undefined' && model2.length > 0) { %>
             <div class="home-cards-container">
                 <% model2.slice(0, 4).forEach(adocao => { %> <!-- Mostra até 4 pets -->
                 <div class="home-card card"> <!-- Adicionada classe .card para herdar estilos base -->
                     <a href="/adocao/<%= adocao.id %>">
                         <img src="/static/uploads/adocao/<%= adocao.arquivo || 'placeholder-pet.jpg' %>" 
                              alt="Foto de <%= adocao.nome %> para adoção" 
                              class="card-img-top home-card-img">
                     </a>
                     <div class="card-body text-center">
                         <h5 class="card-title"><%= adocao.nome %></h5>
                         <p class="text-muted small"><%= adocao.especie %> - <%= adocao.idade %></p>
                         <a href="/adocao/<%= adocao.id %>" class="button btn-sm">Conhecer <%= adocao.nome.split(' ')[0] %></a>
                     </div>
                 </div>
                 <% }); %>
             </div>
             <div class="text-center mt-4">
                 <a href="/adocao" class="button">Ver Todos os Pets</a>
             </div>
             <% } else { %>
             <p class="text-center text-muted">Nenhum animalzinho disponível para adoção no momento. Volte em breve!</p>
             <% } %>
             <a href="/adocao" class="button">Ver Todos os Pets</a>

         </div>
     </section>
 
     <!-- ==========================================================================
         5. Nossos Números / Impacto
         ========================================================================== -->
     <section id="numeros" class="py-5" style="background-color: var(--bg-color);">
         <div class="container">
             <h2 class="text-center mb-5">Nosso Impacto</h2>
             <!-- Adoção -->
             <div class="row text-center gy-4 justify-content-center">
                 <div class="col-lg-3 col-md-6">
                     <div class="card card-impact h-100" style="border: none; background: transparent;">
                         <div class="card-body">
                             <i class="fas fa-paw fa-3x mb-3" style="color: var(--heading-color);"></i>
                             <h3 class="card-title display-4 fw-bold"><%= (typeof model3 !== 'undefined' && model3.count) ? model3.count : '0' %></h3>
                             <p class="text-muted">Animais em Adoção</p>
                             <a href="/adocao">Veja Mais</a>
                         </div>
                     </div>
                 </div>
                 <!-- Adotados -->
                 <div class="col-lg-3 col-md-6">
                     <div class="card card-impact h-100" style="border: none; background: transparent;">
                         <div class="card-body">
                             <i class="fas fa-heart fa-3x mb-3" style="color: var(--heading-color);"></i>
                             <h3 class="card-title display-4 fw-bold"><%= (typeof model7 !== 'undefined' && model7.count) ? model7.count : '0' %></h3>
                             <p class="text-muted">Adotados</p>
                             <a href="/adotado">Veja Mais</a
                         </div>
                     </div>
                 </div>
                 <!-- Adotantes -->
                 <div class="col-lg-3 col-md-6">
                     <div class="card card-impact h-100" style="border: none; background: transparent;">
                         <div class="card-body">
                             <i class="fas fa-users fa-3x mb-3" style="color: var(--heading-color);"></i>
                             <h3 class="card-title display-4 fw-bold"><%= (typeof model5 !== 'undefined' && model5.count) ? model5.count : '0' %></h3>
                             <p class="text-muted">Adotantes na Comunidade</p>
                         </div>
                     </div>
                 </div>
                 <!-- Parcerias -->
                 <div class="col-lg-3 col-md-6">
                     <div class="card card-impact h-100" style="border: none; background: transparent;">
                         <div class="card-body">
                             <i class="fas fa-hands-helping fa-3x mb-3" style="color: var(--heading-color);"></i>
                             <h3 class="card-title display-4 fw-bold"><%= (typeof model13 !== 'undefined' && model13.count) ? model13.count : '0' %></h3>
                             <p class="text-muted">Parcerias</p>
                             <a href="/parceria">Veja Mais</a
                         </div>
                     </div>
                 </div>
             
         <!-- Castração -->
         <div class="col-lg-3 col-md-6">
            <div class="card card-impact h-100" style="border: none; background: transparent;">
                <div class="card-body">
                    <i class="fas fa-hands-helping fa-3x mb-3" style="color: var(--heading-color);"></i>
                   
                
                    <h3 class="card-title display-4 fw-bold"></h3>
                    <p class="text-muted">Castração</p>
                    <table style="text-align: center; ;">
                        <tr>
                            <th>Ano</th>
                            <th>Realizadas</th>
                        </tr>
                        <tr>
                            <td>2024</td>
                            <td>520</td>                 
                        </tr>
                        <tr>
                            <td>2025</td>
                            <td><%= (typeof model9 !== 'undefined' && model9.count) ? model9.count : '0' %>
                            </td>
                        </tr>
                    </table>
                    <a href="/castracao">Veja Mais</a
                </div>
            </div>
        </div>
 
<!-- Ticket de castracao -->
<div class="col-lg-3 col-md-6">
    <div class="card card-impact h-100" style="border: none; background: transparent;">
        <div class="card-body">
            <i class="fas fa-hands-helping fa-3x mb-3" style="color: var(--heading-color);"></i>
            <h3 class="card-title display-4 fw-bold">                      
                Tickets de Castração</h3>             
          
            <table class="table table-striped table-hover table-sm caption-top">
                <thead>
                <tr>
                <th>Ticket</th>
                <th>Data</th>
                <th>Nome</th>
                <th>Espécie</th>
                <th>Clínica</th>
                </tr>
                </thead>
                <tbody>
                <% if (typeof model8 !== 'undefined' && model8.length > 0) { %>
                <% model8.slice(0, 5).forEach(castracao => { %>
                <tr>
                <td><%= castracao.ticket %></td>
                <td><%= castracao.origem ? new Date(castracao.origem).toLocaleDateString('pt-BR') : 'N/A' %></td>
                <td><%= castracao.nome %></td>
                <td><%= castracao.especie %></td>
                <td><%= castracao.clinica %></td>
                </tr>
                <% }); %>
            
                <% } else { %>
                <tr>
                <td colspan="5" class="text-center text-muted">Nenhum ticket de castração para exibir no momento.</td>
                </tr>
                <% } %>
            </tbody>
        </table>
                <a href="/castracao">Veja Mais</a>
           
           
        </div>
    </div>
</div>
</div>
</div>
     </section>
 
     <!-- ==========================================================================
         6. Histórias de Adotados
         ========================================================================== -->
     <section id="historias-adotados" class="py-5">
         <div class="container">
             <h2 class="text-center mb-4">Histórias que Inspiram</h2>
             <% if (typeof model6 !== 'undefined' && model6.length > 0) { %>
             <div class="adotados-cards-container">
                 <% model6.slice(0, 3).forEach(adotado => { %> <!-- Mostra até 3 histórias -->
                 <div class="adotado-card card">
                     <img src="/static/uploads/adotado/<%= adotado.arquivo || 'placeholder-pet-story.jpg' %>" 
                          alt="Foto de <%= adotado.pet %>, adotado por <%= adotado.tutor %>" 
                          class="card-img-top adotado-card-img">
                     <div class="card-body">
                         <h5 class="card-title"><%= adotado.pet %></h5>
                         <h6 class="card-subtitle mb-2 text-muted">Adotado por: <%= adotado.tutor %></h6>
                         <p class="card-text adotado-historia-texto">"<%= adotado.historia %>"</p>
                         <small class="text-muted">Em: <%= adotado.origem_formatada %></small>
                     </div>
                 </div>
                 <% }); %>
             </div>
             <div class="text-center mt-4">
                 <a href="/adotado" class="button">Ver Todas as Histórias</a>
                
                 <a href="/adotado/form" class="button ms-2">Adicionar História</a>
                
             </div>
             <% } else { %>
             <p class="text-center text-muted">Ainda não temos histórias de adoção para compartilhar. Seja o primeiro!</p>
             <% if (user) { %>
                 <div class="text-center mt-3"><a href="/adotado/form" class="button">Adicionar História</a></div>
             <% } %>
             <% } %>
             <a href="/adotado" class="button">Ver Todas as Histórias</a>
         </div>
     </section>
 
     <!-- ==========================================================================
         7. Como Ajudar / Chamada Final
         ========================================================================== -->
     <section id="como-ajudar" class="py-5 text-center" style="background-color: var(--heading-color); color: white;">
         <div class="container" style="background-color: transparent; box-shadow: none; border: none;">
             <h2 style="color: white;">Faça Parte da Mudança</h2>
             <p style="font-size: 1.1em; margin-bottom: 2rem;">
                 Sua ajuda, seja como voluntário, parceiro ou doador, é fundamental para continuarmos nosso trabalho.
             </p>
             <a href="/doacao" class="button me-2" style="background-color: white; color: var(--heading-color); border: 1px solid var(--heading-color);">Quero ser Voluntário</a>
             <a href="/parceria/form" class="button" style="background-color: white; color: var(--heading-color); border: 1px solid var(--heading-color);">Seja um Parceiro</a>
         </div>
     </section>
 
 </main>
 
 <%- include("_footer") -%>
 