<%- include("_header") -%>

<div class="container mt-5">
<div class="text-center mb-4">
<h1><i class="fas fa-heart me-2"></i>Conte a História da Sua Adoção!</h1>
<p class="lead">Compartilhe a experiência do seu pet adotado e inspire outras pessoas a darem um lar amoroso a um animalzinho.</p>
</div>

<div class="row justify-content-center">
<div class="col-lg-8 col-md-10">
<div class="card shadow p-4">
<form action="/adotado/form" enctype="multipart/form-data" method="post" id="form-adotado">

<div class="mb-3">
<label for="arquivo" class="form-label fw-bold">Foto do Pet:*</label>
<div id="image-preview-container" class="text-center border rounded p-3 mb-2 bg-light" style="min-height: 220px; display: flex; align-items: center; justify-content: center;">
    <img id="frame" src="" alt="Pré-visualização da foto do pet" class="img-fluid rounded" style="display: none; object-fit: cover; max-width: 100%; height: auto;"/>
    <span id="preview-placeholder" class="text-muted">Nenhuma imagem selecionada</span>
</div>
<input type="file" name="arquivo" id="arquivo" class="form-control" onchange="previewImage(event)" accept="image/*" required/>
<div class="mt-2">
    <button type="button" class="btn btn-sm btn-outline-secondary" onclick="clearImagePreview()">
        <i class="fas fa-times me-1"></i>Limpar Imagem
    </button>
</div>
</div>

<div class="mb-3">
<label for="nome_pet" class="form-label fw-bold">Nome do Pet:*</label>
<input type="text" name="nome_pet" id="nome_pet" class="form-control" placeholder="Nome do Pet" required/>
</div>

<div class="mb-3">
<label for="nome_tutor" class="form-label fw-bold">Nome do Tutor:*</label>
<input type="text" name="nome_tutor" id="nome_tutor" class="form-control" placeholder="Seu nome" required/>
</div>

<div class="mb-4">
<label for="historia" class="form-label fw-bold">História da Adoção:*</label>
<textarea name="historia" id="historia" rows="5" class="form-control" placeholder="Conte como foi a adoção, os momentos especiais..." required></textarea>
</div>

<hr class="my-4">

<div class="d-flex justify-content-between align-items-center">
<a href="/adocao" class="btn btn-secondary">
    <i class="fas fa-times me-1"></i>Cancelar
</a>
<button type="submit" class="btn btn-primary">
    <i class="fas fa-paper-plane me-1"></i>Enviar História
</button>
</div>
<small class="form-text text-muted mt-3 d-block">(*) Campos obrigatórios</small>

</form>
</div>
</div>
</div>
</div>

<script>
const frame = document.getElementById('frame');
const fileInput = document.getElementById('arquivo');
const previewPlaceholder = document.getElementById('preview-placeholder');

function previewImage(event) {
if (event.target.files && event.target.files[0]) {
const reader = new FileReader();
reader.onload = function(e) {
frame.src = e.target.result;
frame.style.display = 'block';
previewPlaceholder.style.display = 'none';
}
reader.readAsDataURL(event.target.files[0]);
} else {
clearImagePreview();
}
}

function clearImagePreview() {
frame.src = '';
frame.style.display = 'none';
previewPlaceholder.style.display = 'block';
fileInput.value = '';
}
</script>

<%- include("_footer") -%>